import type { PlayerListParams } from '@/api/player/types'
import { fetchPlayerList } from '@/api/player'

const usePlayerStore = defineStore(
  // å”¯ä¸€ID
  'player',
  () => {
    const player_list = ref()

    async function getPlayerList(params?: PlayerListParams) {
      const { data } = await fetchPlayerList(params)
      player_list.value = data?.list
        ?.map(item => ({
          ...item,
          team: item.team?.split(',') ?? [], // ðŸ‘ˆ å­—ç¬¦ä¸²è½¬æ•°ç»„
        }))
        ?.sort((a, b) => a.number - b.number)
    }

    return {
      player_list,
      getPlayerList,
    }
  },
)

export default usePlayerStore
